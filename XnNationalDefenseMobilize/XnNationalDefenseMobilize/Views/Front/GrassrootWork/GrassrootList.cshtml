@using XnNationalDefenseMobilize.Models.GrassrootWork
@using XnNationalDefenseMobilize.Models.utility
@model  MulltiPageDisplayContrler

@{   
    List<GrassrootNews> curr_page_data = (List<GrassrootNews>)Model.curr_page_data;
    ViewBag.title = curr_page_data.First().disTrict.district_name;
    int news_type_id = curr_page_data.First().disTrict.district_id;
}

<link href='http://fonts.useso.com/css?family=Open+Sans:300,400,600,700' rel='stylesheet' type='text/css'>
<link href='http://fonts.useso.com/css?family=Fjalla+One|Archivo+Narrow|Oswald:400,700' rel='stylesheet' type='text/css'>
<link href="@Url.Content("~/content/pagecss/frontpagecss/GrassrootWorkCss/grassrootWorkList.css")" rel="stylesheet" type="text/css" media="all" />
<link href="@Url.Content("~/Content/pagecss//frontpagecss/defensecss/reset.css")" rel="stylesheet" type="text/css" media="all" />
<link href="@Url.Content("~/Content/pagecss//frontpagecss/defensecss/style.css")" rel="stylesheet" type="text/css" media="all" />

<div class="page_title">
    <div class="container">
        <div class="leaft_title">
            <h1 style="float: left; font-size: 20px">基层工作  >> @ViewBag.title<span>基层工作</span></h1>
            <div class="site-search-area" style="float: right">
                <form method="get" id="site-searchform" action="Index">
                    <div>
                        <input class="input-text" name="s" id="s" type="text" />
                        <input id="searchsubmit" style="color: white; font-size: 14px; font-weight: bold" value="搜索" type="submit" />
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="grassrootWorkList">
    <div>

        @{                  
            GrassrootNews[] NewsInfoArray = curr_page_data.ToArray();
            for (int i = 0; i < curr_page_data.Count(); i++)
            {
            <a href="@Url.Content("~/GrassrootWork/GrassrootDetail?id=" + NewsInfoArray[i].grassrootNews_id)" class="list-group-item" target="_blank">
                <table>
                    <tr>
                        <td class="artcle_title">
                            <h4>@NewsInfoArray[i].grassrootNews_title</h4>
                        </td>
                        <td class="author">作者：@NewsInfoArray[i].grassrootNews_author</td>
                        <td class="count">浏览次数：20次</td>
                        <td class="time">时间：2016-8-20：12:00</td>
                    </tr>
                </table>
            </a>
            }
        }
    </div>


    @{
        int prePageId = (Model.curr_page_index > 1) ? Model.curr_page_index - 1 : 1;
        int nextPageId = (Model.curr_page_index < Model.count_pages) ? Model.curr_page_index + 1 : Model.count_pages;
    }

    <div style="text-align: center">
        <div class="pagination">
            <a href="@Url.Content("~/GrassrootWork/GrassrootList?type_id=" + news_type_id + "&page_id=1")" class="navlinks">首页</a>
            <a href="@Url.Content("~/GrassrootWork/GrassrootList?type_id=" + news_type_id + "&page_id=" + prePageId)" class="navlinks">&lt;上一页</a>

            @for (int i = Model.start_page_index; i <= Model.end_page_index; i++)
            {
                <a id="@i" href="@Url.Content("~/GrassrootWork/GrassrootList?type_id=" + news_type_id + "&page_id=" + i)" class="navlinks">@i</a>
            }

            <a href="@Url.Content("~/GrassrootWork/GrassrootList?type_id=" + news_type_id + "&page_id=" + nextPageId)" class="navlinks">下一页 ></a>
            <a href="@Url.Content("~/GrassrootWork/GrassrootList?type_id=" + news_type_id + "&page_id=" + Model.count_pages)" class="navlinks">末页</a>
        </div>
    </div>

    <script type="text/javascript">
        var id_name = "@Model.curr_page_index.ToString()";
        document.getElementById(id_name).className = "navlinks current";
    </script>
</div>
